---
title: "DBILIA, Refactored and Redesigned"
date: "2023-02-03"
---

<img src="dbilia-logo-light-mode" alt="DBILIA LOGO" />
[DBILIA](https://dbilia.com/) is an NFT Marketplace.

<img alt="redesign" src="/dbilia/redesign1.png" />
This project was challenging, especially right after graduating from my boot camp. But definitely empowered my refactoring
muscles and proved how a well-refactored code base can easily be changed to meet new requirements.

The project was just approved as an MVP when I joined the team. The MVP code was written quickly, which is okay for an MVP. But it definitely needed refactoring to make it maintainable and scalable.

## Refactoring

My task was to find any bug or inconsistency in the UI and fix it. I found many bugs listed in the Trello board and started tackling them individually. But after a while, I found tracking down a simple bug could take a day. So I started refactoring.

My process was like the one below. It was sometimes in a different order, though.

- break big chunks of code into smaller ones. Like, make a section of the page into a component.
- Create components for frequently used elements like buttons, inputs, etc., and replace them with new components.
- Remove all the inline styles and move them to Sass files.
- Remove any JavaScript code that CSS can handle, such as media query hooks, and write the CSS for it.
- CSS Grid was overused in the project in places where flexbox where more appropriate. So I replaced them with flexbox, which was three times less code!
- I replaced Sass Variables with CSS Variables because I could use them in run time, and creating a dark mode was much easier.
- I used React-joy-ride to create the tour for the new users. So many coupled lines of code were removed.
- I used Formik helper components to make forms more concise.

### A file with +2000 lines of code

For example, there was a file with +2000 lines of code. It was a page where a user could create a new NFT. It consists of a form with many inputs, validation, and a tour for the new users. Plus, the responsiveness was handled by Javascript and was coupled with other logic.

I needed to fix some styling, but the code was not workable!

1. I started to break it into some big chunks with Internal Components.

2. The styles in the project were coming from different sources, such as inline styles, global styles from Sass files, and styles bundled with AndDesing components. So I moved the inline styles into scoped Sass files.

AntDesign components were also problematic cause there was no way safely override the styles. Overriding styles could break the functionality of the components. In addition, antdDesing components were not tree shakable. Importing one small AndDesing component adds the entire AntD library to your application bundle.
I kept them for a while but gradually replaced them with my own components.

3. Then removed all the `width > 640 && <>...</>` and `width = useWidth()` stuff, and handled the responsiveness with CSS.

4. Thing was still very messy. Mostly because of the onboarding tour. The logic for the tour. Unreadblele codes like `onClick={() => if(!tour|| createTour.step !== 5) handleCreateNFT}` where everywhere. So, I needed to decouple that. I used React-joy-ride. It removed many lines of code. I just needed to add ids or special classNames to different sections of the page, and in a separate file, I defined the steps and messages of each step.

5. Finally, I created some custom `<Input />` components to encapsulate the validation, error messages, and reuse styles.

The +2000 lines file was now 500 lines of code and workable and scalable.

## De-coupling new user tours

...

## Redesigning

Some months into the project, I saw many UI design tasks here and there. The code looked much better at this point, but the UI didn't look good in the browser.

I suggested redesigning the app instead of doing band-aid design fixes. I had to deliver the design in Figma. It was one of my first times trying Figma, but it was much more intuitive than Adobe software, and I never returned to Adobe!

<img alt="redesign" src="/dbilia/redesign.png" />

After the design was finished, I started to implement it. And it didn't take long.

The thign I changed was:
valeus of CSS Variables

styles in the components
a walk through each page, changing layouts, and polishing the styles.

<img alt="redesign" src="/dbilia/redesign2.png" />

Later I added more complex responsiveness. While the tour is still working without a problem. Here is the result:

<video alt="Responsiveness" src="/dbilia/responsive.mp4" controls muted controlList="nodownload nofullscreen"></video>

## Concolusion
